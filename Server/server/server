var net = require('net');

/* CONFIGURATION DE LA CONNEXION */
var PORT = 3000;
var HOST = '127.0.0.1';

/* TABLEAUX POUR FONCTIONNALITES */
var socketsConnected = []; //les sockets des clients connectés

/* CREATION DE LA SOCKET COTE SERVEUR */
var server = net.createServer((socket)=>{
    console.log('CONNECTED from ' + socket.remoteAddress + ':' + socket.remotePort);
    //ajout de cet utilisateur dans le tableau des sockets des membres connectés
    socketsConnected.push(socket);

    /* LE SERVEUR ATTEND UNE REQUETE DU CLIENT */
    socket.on('data', function(data) {
        const msg = JSON.parse(data); //conversion du type JSON
        console.log('DATA received from ' + socket.remoteAddress + ':' + data);

        /* SELON L'ACTION SPECIFIEE DANS LE JSON DU CLIENT */
        switch(msg.action){
            //le client souhaite ouvrir la porte
            case 'ouverture': 

            //le client souhaite fermer la porte
            case 'fermeture':
        }
    });
}).listen(PORT, HOST);
